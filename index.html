<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø£Ø±ÙŠÙ† Ø³ØªÙˆØ± - Ù†Ø³Ø®Ø© Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;600;700;800;900&display=swap');
        
        body { 
            font-family: 'Noto Sans Arabic', sans-serif; 
            background-color: #090c10; 
            color: #e6edf3;
            -webkit-tap-highlight-color: transparent;
        }

        .glass-header {
            background: rgba(22, 27, 34, 0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid #30363d;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .card { 
            background: #161b22; 
            border: 1px solid #30363d; 
            border-radius: 20px; 
            transition: all 0.3s ease;
        }

        .gold-btn { 
            background: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
            color: #000; 
            font-weight: 800;
        }

        input, select, textarea { 
            background: #0d1117 !important; 
            border: 1px solid #30363d !important; 
            color: white !important;
            border-radius: 14px !important;
            font-size: 14px !important;
        }

        .nav-item { cursor: pointer; padding: 10px; border-radius: 12px; font-weight: 700; font-size: 0.8rem; color: #8b949e; flex: 1; text-align: center; transition: 0.3s; }
        .nav-item.active { background: #fbbf24; color: #000; }
        
        .pulse-red {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, updateDoc, doc, deleteDoc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        const { useState, useEffect, useMemo } = React;

        const firebaseConfig = {
            apiKey: "AIzaSyAKok61chnRv9_-QQeQ-TP9WkZwc8cqqac",
            authDomain: "arenstore-d61ce.firebaseapp.com",
            projectId: "arenstore-d61ce",
            storageBucket: "arenstore-d61ce.firebasestorage.app",
            messagingSenderId: "5224012268",
            appId: "1:5224012268:web:11d11411b57247a87f08c9"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const APP_ID = "aren_store_launch_v3_stable";

        const App = () => {
            const [view, setView] = useState('home');
            const [subs, setSubs] = useState([]);
            const [expenses, setExpenses] = useState([]);
            const [loading, setLoading] = useState(true);
            const [searchTerm, setSearchTerm] = useState('');
            const [isSubModalOpen, setIsSubModalOpen] = useState(false);
            const [isExpModalOpen, setIsExpModalOpen] = useState(false);
            const [editingId, setEditingId] = useState(null);

            const [formData, setFormData] = useState({
                name: '', telegram: '', phone: '', email: '', service: 'ChatGPT Plus', customService: '', price: '', plan: '30', customPlan: ''
            });

            const [expData, setExpData] = useState({ title: '', amount: '' });

            useEffect(() => {
                const initAuth = async () => {
                    try {
                        await signInAnonymously(auth);
                        onSnapshot(collection(db, 'artifacts', APP_ID, 'public', 'data', 'subscribers'), (snap) => {
                            setSubs(snap.docs.map(d => ({ id: d.id, ...d.data() })));
                            setLoading(false);
                        });
                        onSnapshot(collection(db, 'artifacts', APP_ID, 'public', 'data', 'expenses'), (snap) => {
                            setExpenses(snap.docs.map(d => ({ id: d.id, ...d.data() })));
                        });
                    } catch (error) { console.error(error); }
                };
                initAuth();
            }, []);

            const getRemainingDays = (expiryDate) => {
                const diff = (new Date(expiryDate) - new Date()) / (1000 * 60 * 60 * 24);
                return Math.max(0, Math.ceil(diff));
            };

            const stats = useMemo(() => {
                const totalIncome = subs.reduce((acc, curr) => acc + Number(curr.price || 0), 0);
                const totalExp = expenses.reduce((acc, curr) => acc + Number(curr.amount || 0), 0);
                
                let active = 0;
                let nearEnd = 0;
                let expired = 0;

                subs.forEach(s => {
                    const days = getRemainingDays(s.expiryDate);
                    if (days === 0) expired++;
                    else {
                        active++;
                        if (days <= 3) nearEnd++;
                    }
                });

                return { income: totalIncome, expenses: totalExp, profit: totalIncome - totalExp, totalSubs: subs.length, activeSubs: active, nearEnd, expired };
            }, [subs, expenses]);

            const handleSaveSub = async (e) => {
                e.preventDefault();
                const days = formData.plan === 'custom' ? Number(formData.customPlan) : Number(formData.plan);
                const expiry = new Date();
                expiry.setDate(expiry.getDate() + days);
                const finalService = formData.service === 'Ø£Ø®Ø±Ù‰' ? formData.customService : formData.service;
                
                const data = { ...formData, service: finalService, expiryDate: expiry.toISOString(), updatedAt: Date.now() };
                
                if (editingId) {
                    await updateDoc(doc(db, 'artifacts', APP_ID, 'public', 'data', 'subscribers', editingId), data);
                } else {
                    await addDoc(collection(db, 'artifacts', APP_ID, 'public', 'data', 'subscribers'), { ...data, createdAt: Date.now() });
                }
                setIsSubModalOpen(false);
                setEditingId(null);
                setFormData({ name: '', telegram: '', phone: '', email: '', service: 'ChatGPT Plus', customService: '', price: '', plan: '30', customPlan: '' });
            };

            const handleSaveExp = async (e) => {
                e.preventDefault();
                await addDoc(collection(db, 'artifacts', APP_ID, 'public', 'data', 'expenses'), { ...expData, date: Date.now() });
                setIsExpModalOpen(false);
                setExpData({ title: '', amount: '' });
            };

            const sendNotification = (sub, type) => {
                const days = getRemainingDays(sub.expiryDate);
                const message = `Ø£Ù‡Ù„Ø§Ù‹ ${sub.name} âœ¨\nÙ†Ø°ÙƒØ±Ùƒ Ø¨Ø£Ù† Ø§Ø´ØªØ±Ø§ÙƒÙƒ ÙÙŠ (${sub.service}) Ø³ÙŠÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„ ${days} Ø£ÙŠØ§Ù….\nÙ„Ù„ØªØ¬Ø¯ÙŠØ¯ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ ğŸ’›`;
                
                if (type === 'tg' && sub.telegram) {
                    const tgUser = sub.telegram.startsWith('@') ? sub.telegram.substring(1) : sub.telegram;
                    window.open(`https://t.me/${tgUser}?text=${encodeURIComponent(message)}`);
                } else if (type === 'wa' && sub.phone) {
                    const phone = sub.phone.replace(/[^0-9]/g, '');
                    window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`);
                }
            };

            if (loading) return <div className="h-screen flex items-center justify-center text-yellow-500 font-bold animate-pulse">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù†Ø³Ø®Ø© Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ v3...</div>;

            return (
                <div className="min-h-screen pb-32">
                    <header className="glass-header p-4">
                        <div className="max-w-xl mx-auto flex justify-between items-center mb-4">
                            <div>
                                <h1 className="text-xl font-black text-yellow-500 tracking-tighter italic">AREN STORE</h1>
                                <p className="text-[10px] text-gray-500 font-bold">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø´ØªØ±Ø§ÙƒØ§Øª ÙˆØ§Ù„Ù…Ø§Ù„ÙŠØ©</p>
                            </div>
                            <div className="flex gap-2">
                                <button onClick={() => setIsExpModalOpen(true)} className="bg-red-500/10 text-red-500 px-3 py-2 rounded-xl text-[10px] font-bold border border-red-500/20">ØµØ±ÙÙŠØ©</button>
                                <button onClick={() => {setEditingId(null); setIsSubModalOpen(true);}} className="gold-btn px-4 py-2 rounded-xl text-xs shadow-lg shadow-yellow-500/20">Ø¥Ø¶Ø§ÙØ© Ù…Ø´ØªØ±Ùƒ</button>
                            </div>
                        </div>
                        <div className="max-w-xl mx-auto flex bg-[#1c2128] p-1.5 rounded-2xl shadow-inner">
                            <div onClick={()=>setView('home')} className={`nav-item ${view==='home'?'active':''}`}>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
                            <div onClick={()=>setView('subs')} className={`nav-item ${view==='subs'?'active':''}`}>Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† ({stats.totalSubs})</div>
                            <div onClick={()=>setView('finance')} className={`nav-item ${view==='finance'?'active':''}`}>Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</div>
                        </div>
                    </header>

                    <main className="max-w-xl mx-auto p-4 space-y-4">
                        {view === 'home' && (
                            <div className="space-y-4">
                                <div className="card p-6 border-yellow-500/30 bg-gradient-to-br from-yellow-500/5 to-transparent">
                                    <h3 className="text-gray-400 text-[10px] font-black uppercase mb-4 tracking-widest">ØµØ§ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h3>
                                    <div className="flex justify-between items-end">
                                        <p className="text-4xl font-black text-white">{stats.profit.toLocaleString()} <span className="text-sm text-yellow-500 font-normal">Ø¯.Ø¹</span></p>
                                        <div className="text-center bg-green-500/10 px-3 py-1 rounded-lg border border-green-500/20">
                                            <p className="text-[10px] font-bold text-green-500 uppercase">Ø§Ù„Ù†Ø´Ø·ÙŠÙ†</p>
                                            <p className="text-lg font-black text-green-500">{stats.activeSubs}</p>
                                        </div>
                                    </div>
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <div className="card p-4 border-red-500/20 bg-red-500/5">
                                        <p className="text-[10px] text-red-400 font-bold mb-1 uppercase">Ù…Ù†ØªÙ‡ÙŠÙ†</p>
                                        <p className="text-2xl font-black text-red-500">{stats.expired}</p>
                                    </div>
                                    <div className="card p-4 border-orange-500/20 bg-orange-500/5">
                                        <p className="text-[10px] text-orange-400 font-bold mb-1 uppercase">Ù‚Ø±Ø¨ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ (â‰¤3 Ø£ÙŠØ§Ù…)</p>
                                        <p className="text-2xl font-black text-orange-500">{stats.nearEnd}</p>
                                    </div>
                                </div>

                                <div className="grid grid-cols-2 gap-4 opacity-70">
                                    <div className="card p-4 border-green-500/20">
                                        <p className="text-[10px] text-gray-500 font-bold mb-1 uppercase">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ©</p>
                                        <p className="text-xl font-black text-green-400">{stats.income.toLocaleString()}</p>
                                    </div>
                                    <div className="card p-4 border-red-500/20">
                                        <p className="text-[10px] text-gray-500 font-bold mb-1 uppercase">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØµØ±Ù</p>
                                        <p className="text-xl font-black text-red-400">{stats.expenses.toLocaleString()}</p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'subs' && (
                            <div className="space-y-4">
                                <div className="relative">
                                    <input 
                                        className="w-full p-4 pr-12" 
                                        placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù…ØŒ ÙŠÙˆØ²Ø±ØŒ Ø®Ø¯Ù…Ø© Ø£Ùˆ Ø¥ÙŠÙ…ÙŠÙ„..." 
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                    />
                                    <span className="absolute left-4 top-4 text-gray-600">ğŸ”</span>
                                </div>
                                
                                {subs.filter(s => 
                                    s.name?.toLowerCase().includes(searchTerm.toLowerCase()) || 
                                    s.telegram?.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                    s.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                    s.service?.toLowerCase().includes(searchTerm.toLowerCase())
                                ).sort((a,b) => getRemainingDays(a.expiryDate) - getRemainingDays(b.expiryDate)).map(s => {
                                    const daysLeft = getRemainingDays(s.expiryDate);
                                    const isCritical = daysLeft > 0 && daysLeft <= 3;
                                    return (
                                        <div key={s.id} className={`card p-5 relative overflow-hidden transition-all ${daysLeft === 0 ? 'border-red-900/40 opacity-70' : isCritical ? 'border-orange-500/40 bg-orange-500/5 pulse-red' : ''}`}>
                                            <div className="flex justify-between items-start mb-3">
                                                <div className="max-w-[65%]">
                                                    <h3 className="font-black text-lg text-white truncate">{s.name}</h3>
                                                    <div className="bg-yellow-500/10 inline-block px-2 py-0.5 rounded text-[11px] font-bold text-yellow-500 mb-1">
                                                        {s.service} â€¢ {Number(s.price).toLocaleString()} Ø¯.Ø¹
                                                    </div>
                                                    <p className="text-[11px] text-blue-400 font-mono font-semibold break-all">{s.email || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø±ÙŠØ¯"}</p>
                                                </div>
                                                <div className="text-left">
                                                    <span className={`text-[10px] px-3 py-1 rounded-full font-black ${daysLeft === 0 ? 'bg-red-500 text-white' : isCritical ? 'bg-orange-500 text-white' : 'bg-green-500/10 text-green-500 border border-green-500/20'}`}>
                                                        {daysLeft === 0 ? 'Ù…Ù†ØªÙ‡ÙŠ âŒ' : `Ø¨Ù‚ÙŠ ${daysLeft} ÙŠÙˆÙ…`}
                                                    </span>
                                                    <p className="text-[10px] text-gray-500 mt-2 font-mono">{s.telegram || "Ù„Ø§ ÙŠÙˆØ²Ø±"}</p>
                                                </div>
                                            </div>
                                            
                                            <div className="flex gap-2 mt-4 pt-4 border-t border-gray-800">
                                                {s.telegram && (
                                                    <button onClick={() => sendNotification(s, 'tg')} className="flex-1 bg-[#229ED9]/10 text-[#229ED9] py-2.5 rounded-xl text-[10px] font-black border border-[#229ED9]/20 hover:bg-[#229ED9]/20 transition-all">ØªØ°ÙƒÙŠØ± ØªÙ„ÙŠØ¬Ø±Ø§Ù…</button>
                                                )}
                                                {s.phone && (
                                                    <button onClick={() => sendNotification(s, 'wa')} className="flex-1 bg-[#25D366]/10 text-[#25D366] py-2.5 rounded-xl text-[10px] font-black border border-[#25D366]/20 hover:bg-[#25D366]/20 transition-all">ØªØ°ÙƒÙŠØ± ÙˆØ§ØªØ³Ø§Ø¨</button>
                                                )}
                                                <button onClick={() => {setFormData({...s, customService: s.service}); setEditingId(s.id); setIsSubModalOpen(true);}} className="w-12 bg-gray-800 text-gray-400 rounded-xl text-lg flex items-center justify-center">âš™ï¸</button>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}

                        {view === 'finance' && (
                            <div className="space-y-4">
                                <div className="flex justify-between items-center">
                                    <h2 className="font-black text-gray-400 text-sm">Ø³Ø¬Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</h2>
                                    <span className="text-[10px] text-red-500 font-bold">-{stats.expenses.toLocaleString()} Ø¯.Ø¹</span>
                                </div>
                                {expenses.sort((a,b)=>b.date-a.date).map(e => (
                                    <div key={e.id} className="card p-4 flex justify-between items-center border-r-4 border-r-red-500">
                                        <div>
                                            <p className="font-bold text-sm text-white">{e.title}</p>
                                            <p className="text-[10px] text-gray-500">{new Date(e.date).toLocaleDateString('ar-IQ')}</p>
                                        </div>
                                        <div className="flex items-center gap-4">
                                            <p className="font-black text-red-500">{Number(e.amount).toLocaleString()} Ø¯.Ø¹</p>
                                            <button onClick={() => { if(confirm('Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙØŸ')) deleteDoc(doc(db, 'artifacts', APP_ID, 'public', 'data', 'expenses', e.id)) }} className="text-gray-700 hover:text-red-500 transition-colors">âœ•</button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </main>

                    {/* Modal Subscriber */}
                    {isSubModalOpen && (
                        <div className="fixed inset-0 bg-black/95 backdrop-blur-xl z-[100] flex items-center justify-center p-4">
                            <div className="card w-full max-w-md p-6 max-h-[90vh] overflow-y-auto shadow-2xl">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-xl font-black text-yellow-500">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´ØªØ±Ùƒ</h2>
                                    <button onClick={()=>setIsSubModalOpen(false)} className="text-gray-500 text-2xl">âœ•</button>
                                </div>
                                <form onSubmit={handleSaveSub} className="space-y-4">
                                    <div>
                                        <label className="text-[10px] text-gray-500 font-bold block mb-1">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ *</label>
                                        <input required placeholder="Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†" className="p-3.5 w-full" value={formData.name} onChange={e=>setFormData({...formData, name:e.target.value})} />
                                    </div>
                                    
                                    <div>
                                        <label className="text-[10px] text-gray-500 font-bold block mb-1">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ Ù„Ù„Ø¥Ø¸Ù‡Ø§Ø±)</label>
                                        <input required type="email" placeholder="example@email.com" className="p-3.5 w-full" value={formData.email} onChange={e=>setFormData({...formData, email:e.target.value})} />
                                    </div>

                                    <div className="grid grid-cols-2 gap-3">
                                        <div>
                                            <label className="text-[10px] text-blue-500 font-bold block mb-1">ÙŠÙˆØ²Ø± ØªÙ„ÙŠØ¬Ø±Ø§Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                                            <input placeholder="@username" className="p-3.5 w-full border-blue-900/30" value={formData.telegram} onChange={e=>setFormData({...formData, telegram:e.target.value})} />
                                        </div>
                                        <div>
                                            <label className="text-[10px] text-green-500 font-bold block mb-1">Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                                            <input placeholder="96478..." className="p-3.5 w-full border-green-900/30" value={formData.phone} onChange={e=>setFormData({...formData, phone:e.target.value})} />
                                        </div>
                                    </div>
                                    
                                    <div className="pt-2 border-t border-gray-800">
                                        <div className="grid grid-cols-2 gap-3">
                                            <div>
                                                <label className="text-[10px] text-gray-500 font-bold block mb-1">Ø§Ù„Ø®Ø¯Ù…Ø©</label>
                                                <select className="p-3.5 w-full" value={formData.service} onChange={e=>setFormData({...formData, service:e.target.value})}>
                                                    <option>ChatGPT Plus</option>
                                                    <option>Netflix 4K</option>
                                                    <option>YouTube Premium</option>
                                                    <option>Spotify Family</option>
                                                    <option>Ø£Ø®Ø±Ù‰</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label className="text-[10px] text-gray-500 font-bold block mb-1">Ø§Ù„Ø³Ø¹Ø± (Ø¯.Ø¹)</label>
                                                <input type="number" required placeholder="Ù…Ø«Ù„Ø§Ù‹: 10000" className="p-3.5 w-full" value={formData.price} onChange={e=>setFormData({...formData, price:e.target.value})} />
                                            </div>
                                        </div>
                                    </div>
                                    
                                    {formData.service === 'Ø£Ø®Ø±Ù‰' && <input placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø© Ù‡Ù†Ø§" className="p-3.5 w-full border-yellow-500/20" value={formData.customService} onChange={e=>setFormData({...formData, customService:e.target.value})} />}
                                    
                                    <div>
                                        <label className="text-[10px] text-gray-500 font-bold block mb-1">Ù…Ø¯Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</label>
                                        <div className="grid grid-cols-2 gap-3">
                                            <select className="p-3.5 w-full" value={formData.plan} onChange={e=>setFormData({...formData, plan:e.target.value})}>
                                                <option value="30">Ø´Ù‡Ø± ÙˆØ§Ø­Ø¯</option>
                                                <option value="90">3 Ø£Ø´Ù‡Ø±</option>
                                                <option value="180">6 Ø£Ø´Ù‡Ø±</option>
                                                <option value="365">Ø³Ù†Ø© ÙƒØ§Ù…Ù„Ø©</option>
                                                <option value="custom">Ø£ÙŠØ§Ù… Ù…Ø®ØµØµØ©</option>
                                            </select>
                                            {formData.plan === 'custom' && <input type="number" placeholder="ÙƒÙ… ÙŠÙˆÙ…ØŸ" className="p-3.5 w-full" value={formData.customPlan} onChange={e=>setFormData({...formData, customPlan:e.target.value})} />}
                                        </div>
                                    </div>

                                    <button type="submit" className="gold-btn w-full py-4 rounded-2xl text-sm mt-4 shadow-xl">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                                    {editingId && (
                                        <button type="button" onClick={async () => { if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ')) { await deleteDoc(doc(db, 'artifacts', APP_ID, 'public', 'data', 'subscribers', editingId)); setIsSubModalOpen(false); } }} className="w-full text-red-500 text-[10px] font-bold py-2 mt-2">Ø­Ø°Ù Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹</button>
                                    )}
                                </form>
                            </div>
                        </div>
                    )}

                    {/* Modal Expense */}
                    {isExpModalOpen && (
                        <div className="fixed inset-0 bg-black/95 backdrop-blur-xl z-[100] flex items-center justify-center p-4">
                            <div className="card w-full max-w-sm p-6 border-red-500/20">
                                <h2 className="text-xl font-black mb-6 text-red-500">ØªØ³Ø¬ÙŠÙ„ Ù…ØµØ±ÙˆÙ</h2>
                                <form onSubmit={handleSaveExp} className="space-y-4">
                                    <input required placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ" className="p-3.5 w-full" value={expData.title} onChange={e=>setExpData({...expData, title:e.target.value})} />
                                    <input type="number" required placeholder="Ø§Ù„Ù…Ø¨Ù„Øº Ø¯.Ø¹" className="p-3.5 w-full" value={expData.amount} onChange={e=>setExpData({...expData, amount:e.target.value})} />
                                    <button type="submit" className="bg-red-500 text-white w-full py-4 rounded-2xl font-black shadow-xl mt-2">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØµØ±Ù</button>
                                    <button type="button" onClick={()=>setIsExpModalOpen(false)} className="w-full text-gray-500 text-[10px] py-2">Ø¥Ù„ØºØ§Ø¡</button>
                                </form>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
